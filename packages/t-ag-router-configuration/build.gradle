plugins {
    id "nebula.ospackage" version "4.10.0"
}

version = "2.0"
description = "Die Konfiguration zum Teilen der Internetverbindung"

// The distribution package
task getPackage(type: Deb) {
    group = "distribution"

    packageName = "t-ag-router-config"
    maintainer = "Technik-AG"
    release = "1"
    user = "root"

    // Required packages
    requires("network-manager")

    // Required by NetworkManager for connection sharing
    requires("dnsmasq-base")
    requires("iptables")

    // Copy the connection settings
    from("./src/NetworkManager/system-connections") {
        into("/etc/NetworkManager/system-connections")

        // NetworkManager only accepts files with secure permissions
        fileMode 0600
    }

    // Configuration for the router's name
    from("./src/NetworkManager/dnsmasq-shared.d") {
        into("/etc/NetworkManager/dnsmasq-shared.d")
    }

    // Configuration for NetworkManager itself
    from("./src/NetworkManager/conf.d") {
        into("/etc/NetworkManager/conf.d")
    }
}